(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,a){e.exports=a(29)},24:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(17),r=a.n(c),i=a(1),o=(a(24),a(4)),s=a(3),m=a(2),u=a.n(m);var p=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),m=Object(i.a)(r,2),p=m[0],d=m[1],f=Object(n.useRef)(null),h=Object(o.e)(),g=Object(n.useContext)(S),E=g.state,v=g.dispatch;return Object(n.useEffect)((function(){u.a.Modal.init(f.current)}),[]),l.a.createElement("nav",{className:"navBar"},l.a.createElement("div",{className:"nav-wrapper white"},l.a.createElement(s.b,{to:E?"/":"/login",id:"font__black",className:"brand-logo left"},"Instagram"),l.a.createElement("ul",{id:"nav-mobile",className:"right"},E?[l.a.createElement("li",{key:"1"},l.a.createElement("i",{"data-target":"modal1",style:{color:"black",cursor:"pointer"},className:"large material-icons modal-trigger"},"search")),l.a.createElement("li",{key:"2"},l.a.createElement(s.b,{className:"font__black",to:"/followposts"},"Follow posts")),l.a.createElement("li",{key:"3"},l.a.createElement(s.b,{className:"font__black",to:"/profile"},l.a.createElement("i",{id:"mobile",className:"material-icons"},"person")," ",l.a.createElement("div",{id:"window"},"Profile"))),l.a.createElement("li",{key:"4"},l.a.createElement(s.b,{className:"font__black",to:"/createpost"},l.a.createElement("i",{id:"mobile",className:"material-icons"},"file_upload")," ",l.a.createElement("div",{id:"window"},"Create Post"))),l.a.createElement("li",{key:"5"},l.a.createElement("button",{className:"btn #ff5252 red accent-2",onClick:function(){localStorage.clear(),v({type:"CLEAR"}),h.push("/login")}},l.a.createElement("i",{style:{marginTop:"-10px"},id:"mobile",className:"material-icons"},"exit_to_app")," ",l.a.createElement("div",{id:"window"},"log out")))]:[l.a.createElement("li",{key:"6"},l.a.createElement(s.b,{className:"font__black",to:"/login"},"Login")),l.a.createElement("li",{key:"7"},l.a.createElement(s.b,{className:"font__black",to:"/signup"},"SignUp"))])),l.a.createElement("div",{id:"modal1",className:"modal",ref:f,style:{color:"black",zIndex:1}},l.a.createElement("div",{className:"modal-content"},l.a.createElement("input",{type:"text",placeholder:"search",value:a,onChange:function(e){return t=e.target.value,c(t),void fetch("/search-user",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})}).then((function(e){return e.json()})).then((function(e){console.log(e),d(e.user)}));var t}}),E&&l.a.createElement("ul",{className:"collection",style:{display:"flex",flexDirection:"column"}},p.map((function(e){return l.a.createElement(s.b,{style:{padding:0},key:e._id,to:e._id!==E._id?"/profile/".concat(e._id):"/profile",onClick:function(){return u.a.Modal.getInstance(f.current).close()}},l.a.createElement("li",{style:{color:"black",width:"100%",margin:0},className:"collection-item"},e.name," ",l.a.createElement("br",null),e.email))})))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{className:"modal-close waves-effect waves-green btn-flat",onClick:function(){return c("")}},"close"))))},d=function(){return l.a.createElement("div",{className:"preloader-wrapper small active"},l.a.createElement("div",{className:"spinner-layer spinner-blue"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"}))),l.a.createElement("div",{className:"spinner-layer spinner-red"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"}))),l.a.createElement("div",{className:"spinner-layer spinner-yellow"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"}))),l.a.createElement("div",{className:"spinner-layer spinner-green"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"}))))},f=function(){return l.a.createElement("div",{className:"preloader-wrapper big active"},l.a.createElement("div",{className:"spinner-layer spinner-blue"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"}))),l.a.createElement("div",{className:"spinner-layer spinner-red"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"}))),l.a.createElement("div",{className:"spinner-layer spinner-yellow"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"}))),l.a.createElement("div",{className:"spinner-layer spinner-green"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"}))))};var h=function(){var e=Object(n.useContext)(S),t=e.state,a=(e.dispatch,Object(n.useState)([])),c=Object(i.a)(a,2),r=c[0],o=c[1],m=Object(n.useState)(!1),u=Object(i.a)(m,2),p=u[0],d=u[1],h=Object(n.useState)(""),g=Object(i.a)(h,2),E=g[0],v=g[1],b=Object(n.useState)(""),y=Object(i.a)(b,2),N=y[0],j=y[1],O=Object(n.useState)(""),x=Object(i.a)(O,2),w=x[0],_=x[1];Object(n.useEffect)((function(){fetch("/allposts",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){o(e.posts),d(!0)})).catch((function(e){return console.log(e)}))}),[]);var k=function(e,t){j(t),e===C&&C(t),e===I&&I(t)},C=function(e){fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(e){var t=r.map((function(t){return t._id===e._id?e:t}));j(""),o(t)})).catch((function(e){return console.log(e)}))},I=function(e){fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(e){var t=r.map((function(t){return t._id===e._id?e:t}));j(""),o(t)})).catch((function(e){return console.log(e)}))};return l.a.createElement(l.a.Fragment,null,p?l.a.createElement("div",{className:"home"},r.map((function(e){return l.a.createElement("div",{key:e._id,className:"card home-card"},E===e._id?l.a.createElement("div",{style:{alignItems:"center",display:"flex",flexDirection:"column",padding:"100px 0 100px 0"}}," ",l.a.createElement("h2",null,"loading.....!")," ",l.a.createElement(f,null)," "):l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{style:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%"}},l.a.createElement(s.b,{className:"link",style:{display:"flex",flexDirection:"row",padding:"0 10px"},to:e.postedBy._id!==t._id?"/profile/".concat(e.postedBy._id):"/profile"},l.a.createElement("img",{style:{width:"40px",margin:"10px 10px 0 0",borderRadius:"50%"},src:e.postedBy.profilePic,alt:""}),l.a.createElement("h5",null,e.postedBy.name)),e.postedBy._id===t._id&&l.a.createElement("i",{className:"material-icons right",style:{cursor:"pointer",margin:"10px 10px 0 auto"},onClick:function(){return t=e._id,v(t),void fetch("/deletepost/".concat(t),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){var t=r.filter((function(t){return t._id!==e._id}));o(t)})).catch((function(e){return console.log(e)}));var t}},"delete")),l.a.createElement("div",{className:"card-image"},l.a.createElement("img",{src:e.photo,alt:""})),l.a.createElement("div",{className:"card-content"},N===e._id?l.a.createElement(l.a.Fragment,null,e.likes.includes(t._id)?l.a.createElement("i",{className:"material-icons",style:{color:"red",cursor:"pointer"}},"favorite_border"):l.a.createElement("i",{className:"material-icons",style:{color:"black",cursor:"pointer"}},"favorite")):l.a.createElement(l.a.Fragment,null,e.likes.includes(t._id)?l.a.createElement("i",{className:"material-icons",onClick:function(){k(I,e._id)},style:{color:"red",cursor:"pointer"}},"favorite"):l.a.createElement("i",{className:"material-icons",onClick:function(){k(C,e._id)},style:{color:"black",cursor:"pointer"}},"favorite_border")),l.a.createElement("h6",null,e.likes.length," likes"),l.a.createElement("h6",null,e.title),l.a.createElement("p",null,e.body),e.comments.map((function(e,t){return l.a.createElement("h6",{key:t},l.a.createElement("span",{style:{fontWeight:"500"}},e.postedBy.name," :  "),"  ",e.text)})),l.a.createElement("form",{onSubmit:function(t){var a,n;t.preventDefault(),a=t.target[0].value,n=e._id,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:n,text:a})}).then((function(e){return e.json()})).then((function(e){var t=r.map((function(t){return t._id===e._id?e:t}));o(t)})).catch((function(e){return console.log(e)}))},style:{display:"flex"}},l.a.createElement("input",{type:"text",value:w,onChange:function(e){return _(e.target.value)},placeholder:"comment"}),l.a.createElement("button",{className:"btn #ffffff white"},l.a.createElement("i",{className:"material-icons",style:{color:"#64b5f6"}},"send"))))))}))):l.a.createElement("div",{style:{alignItems:"center",display:"flex",flexDirection:"column"}}," ",l.a.createElement("h2",{style:{margin:"100px 0 100px 0"}},"loading.....!")," ",l.a.createElement(f,null)," "))};var g=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useContext)(S),o=r.state,m=(r.dispatch,Object(n.useState)(!0)),u=Object(i.a)(m,2),p=u[0],d=u[1];return Object(n.useEffect)((function(){fetch("/mypost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){c(e.mypost),d(!1)}))}),[]),l.a.createElement(l.a.Fragment,null,p?l.a.createElement("div",{style:{alignItems:"center",display:"flex",flexDirection:"column"}}," ",l.a.createElement("h2",{style:{margin:"100px 0 100px 0"}},"loading.....!")," ",l.a.createElement(f,null)," "):l.a.createElement("div",{className:"profile"},l.a.createElement(s.b,{to:"/editProfile",style:{color:"black"}},l.a.createElement("i",{style:{padding:"10px"},className:"material-icons right "},"edit")),l.a.createElement("div",{className:"profile__top"},l.a.createElement("div",{className:"profile__head"},l.a.createElement("div",{className:"profile__image"},l.a.createElement("img",{style:{width:"160px",height:"160px",borderRadius:"80px"},src:o?o.profilePic:"loading...",alt:"profile pic"})),l.a.createElement("div",{className:"profile__headDescription"},l.a.createElement("h4",null,o?o.name:"loading..."),l.a.createElement("h6",null,o?o.email:"loading..."),l.a.createElement("div",{style:{display:"flex",width:"60%",justifyContent:"space-around"}},l.a.createElement("p",{style:{textAlign:"center",padding:"10px"}},a.length," posts"),l.a.createElement("p",{style:{textAlign:"center",padding:"10px"}},o?o.followers.length:"loading.."," followers"),l.a.createElement("p",{style:{textAlign:"center",padding:"10px"}},o?o.following.length:"loading.."," following"))))),l.a.createElement("div",{className:"profile__gallery"},a.map((function(e,t){return l.a.createElement("img",{key:t,className:"Profile__galleryimg",src:e.photo,alt:"post"})})))))};var E=function(){var e=Object(n.useContext)(S),t=(e.state,e.dispatch),a=Object(o.e)(),c=Object(n.useState)(""),r=Object(i.a)(c,2),m=r[0],p=r[1],d=Object(n.useState)(""),f=Object(i.a)(d,2),h=f[0],g=f[1];return l.a.createElement("div",{className:"myCard"},l.a.createElement("div",{className:"card auth-card input-field"},l.a.createElement("h2",{className:"brand-logo"},"Instagram"),l.a.createElement("input",{type:"text",placeholder:"Email",value:h,onChange:function(e){return g(e.target.value)}}),l.a.createElement("input",{type:"password",placeholder:"password",value:m,onChange:function(e){return p(e.target.value)}}),l.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-2",onClick:function(){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(h)?fetch("/auth/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h,password:m})}).then((function(e){return e.json()})).then((function(e){e.error?u.a.toast({html:e.error,classes:"#ff5252 red accent-2"}):(localStorage.setItem("jwt",e.token),localStorage.setItem("user",JSON.stringify(e.user)),t({type:"USER",payload:e.user}),u.a.toast({html:"Signedin Successfully",classes:"#69f0ae green accent-2"}),a.push("/"))})).catch((function(e){console.log(e)})):u.a.toast({html:"Entered a invalid Email",classes:"#ff5252 red accent-2"})}},"Log in"),l.a.createElement("h6",null,l.a.createElement(s.b,{to:"/signup"},"Don't have an account ?")),l.a.createElement("h6",null,l.a.createElement(s.b,{to:"/reset"},"forgot password ?"))))};var v=function(){var e=Object(o.e)(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],r=a[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),d=p[0],f=p[1],h=Object(n.useState)(""),g=Object(i.a)(h,2),E=g[0],v=g[1];return l.a.createElement("div",{className:"myCard"},l.a.createElement("div",{className:"card auth-card input-field"},l.a.createElement("h2",{className:"brand-logo"},"Instagram"),l.a.createElement("input",{type:"text",placeholder:"Username",value:c,onChange:function(e){return r(e.target.value)}}),l.a.createElement("input",{type:"email",placeholder:"Email",value:E,onChange:function(e){return v(e.target.value)}}),l.a.createElement("input",{type:"password",placeholder:"password",value:d,onChange:function(e){return f(e.target.value)}}),l.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-2",onClick:function(){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(E)?fetch("http://localhost:5000/auth/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,email:E,password:d})}).then((function(e){return e.json()})).then((function(t){t.error?u.a.toast({html:t.error,classes:"#ff5252 red accent-2"}):(u.a.toast({html:t.message,classes:"#69f0ae green accent-2"}),e.push("/login"))})).catch((function(e){console.log(e)})):u.a.toast({html:"Entered a invalid Email",classes:"#ff5252 red accent-2"})}},"Sign Up"),l.a.createElement("h6",null,l.a.createElement(s.b,{to:"/login"},"Already have an account ?"))))};var b=function(){var e=Object(o.e)(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(""),m=Object(i.a)(s,2),p=m[0],d=m[1],h=Object(n.useState)(""),g=Object(i.a)(h,2),E=g[0],v=g[1],b=Object(n.useState)(""),y=Object(i.a)(b,2),N=y[0],j=y[1],O=Object(n.useState)(!1),x=Object(i.a)(O,2),w=x[0],S=x[1];return Object(n.useEffect)((function(){N&&fetch("/createpost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({title:c,body:p,pic:N})}).then((function(e){return e.json()})).then((function(t){t.error?(u.a.toast({html:t.error,classes:"#ff5252 red accent-2"}),S(!1)):(u.a.toast({html:"created a post Successfully",classes:"#69f0ae green accent-2"}),e.push("/"))})).catch((function(e){console.log(e),S(!1)}))}),[N]),l.a.createElement(l.a.Fragment,null,w?l.a.createElement("div",{style:{alignItems:"center",display:"flex",flexDirection:"column"}}," ",l.a.createElement("h2",{style:{margin:"100px 0 100px 0"}},"loading.....!")," ",l.a.createElement(f,null)," "):l.a.createElement("div",{className:"card input-filed",style:{margin:"30px auto",maxWidth:"600px",padding:"20px",textAlign:"center"}},l.a.createElement("input",{type:"text",placeholder:"title",value:c,onChange:function(e){return r(e.target.value)}}),l.a.createElement("input",{type:"text",placeholder:"body",value:p,onChange:function(e){return d(e.target.value)}}),l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn waves-effect waves-light #64b5f6 blue darken-2"},l.a.createElement("span",null,"File"),l.a.createElement("input",{type:"file",onChange:function(e){return v(e.target.files[0])}})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text"}))),l.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-2",onClick:function(){return function(){S(!0);var e=new FormData;e.append("file",E),e.append("upload_preset","insta-clone"),e.append("cloud_name","dhhb3z0nt"),u.a.toast({html:"wait posting......<br />Don't perform any activities"}),fetch("\thttps://api.cloudinary.com/v1_1/dhhb3z0nt/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){j(e.url)})).catch((function(e){console.log(e),S(!1)}))}()}},"Create Post")))},y=function(e,t){return"USER"===t.type?t.payload:"CLEAR"===t.type?null:e};var N=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),s=Object(i.a)(r,2),m=s[0],u=s[1],p=Object(n.useState)([]),h=Object(i.a)(p,2),g=h[0],E=h[1],v=Object(n.useContext)(S),b=v.state,y=v.dispatch,N=Object(o.f)().userid;Object(n.useEffect)((function(){fetch("/user/".concat(N),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){E(e.posts),c(e.user)}))}),[]);var j=function(e){u(!0),e===O&&O(),e===x&&x()},O=function(){fetch("/follow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:N})}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("user",JSON.stringify(e.user)),y({type:"USER",payload:e.user}),c(e.result),u(!1)})).catch((function(e){return console.log(e)}))},x=function(){fetch("/unfollow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({unfollowId:N})}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("user",JSON.stringify(e.user)),y({type:"USER",payload:e.user}),c(e.result),u(!1)})).catch((function(e){return console.log(e)}))};return l.a.createElement(l.a.Fragment,null,a?l.a.createElement("div",{className:"profile"},l.a.createElement("div",{className:"profile__top"},l.a.createElement("div",{className:"profile__head"},l.a.createElement("div",{className:"profile__image"},l.a.createElement("img",{style:{width:"160px",height:"160px",borderRadius:"80px"},src:"https://images.unsplash.com/flagged/photo-1577351285836-19ff13f8e615?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60",alt:"profile pic"})),l.a.createElement("div",{className:"profile__headDescription"},l.a.createElement("h4",null,a?a.name:"loading..."),l.a.createElement("h6",null,a?a.email:"loading..."),l.a.createElement("div",{style:{display:"flex",width:"60%",justifyContent:"space-around"}},l.a.createElement("p",{style:{textAlign:"center",padding:"10px"}},g.length," posts"),l.a.createElement("p",{style:{textAlign:"center",padding:"10px"}},a.followers.length," followers"),l.a.createElement("p",{style:{textAlign:"center",padding:"10px"}},a.following.length," following")),m?l.a.createElement("button",{className:"btn #ffffff white"},l.a.createElement(d,null)):l.a.createElement(l.a.Fragment,null,a.followers.includes(b._id)?l.a.createElement("button",{className:"btn waves-effect waves-light #ffffff white",style:{color:"black",zIndex:0},onClick:function(){return j(x)}},"following"):l.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-2",style:{zIndex:0},onClick:function(){return j(O)}},"Follow"))))),l.a.createElement("div",{className:"profile__gallery"},g.map((function(e,t){return l.a.createElement("img",{key:t,className:"Profile__galleryimg",src:e.photo,alt:"post"})})))):l.a.createElement("div",{style:{alignItems:"center",display:"flex",flexDirection:"column"}}," ",l.a.createElement("h2",{style:{margin:"100px 0 100px 0"}},"loading.....!")," ",l.a.createElement(f,null)," "))};var j=function(){var e=Object(n.useContext)(S),t=e.state,a=(e.dispatch,Object(n.useState)([])),c=Object(i.a)(a,2),r=c[0],o=c[1],m=Object(n.useState)(!0),u=Object(i.a)(m,2),p=u[0],d=u[1],h=Object(n.useState)(""),g=Object(i.a)(h,2),E=g[0],v=g[1],b=Object(n.useState)(""),y=Object(i.a)(b,2),N=y[0],j=y[1];Object(n.useEffect)((function(){fetch("/getSubpost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){o(e.posts),d(!1)})).catch((function(e){return console.log(e)}))}),[]);var O=function(e,t){j(t),e===x&&x(t),e===w&&w(t)},x=function(e){fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(e){var t=r.map((function(t){return t._id===e._id?e:t}));o(t),j("")})).catch((function(e){return console.log(e)}))},w=function(e){fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(e){var t=r.map((function(t){return t._id===e._id?e:t}));o(t),j("")})).catch((function(e){return console.log(e)}))};return l.a.createElement(l.a.Fragment,null,p?l.a.createElement("div",{style:{alignItems:"center",display:"flex",flexDirection:"column"}}," ",l.a.createElement("h2",{style:{margin:"100px 0 100px 0"}},"loading.....!")," ",l.a.createElement(f,null)," "):l.a.createElement("div",{className:"home"},r.map((function(e){return l.a.createElement("div",{key:e._id,className:"card home-card"},l.a.createElement("h5",null,l.a.createElement(s.b,{className:"link",to:e.postedBy._id!==t._id?"/profile/".concat(e.postedBy._id):"/profile"},e.postedBy.name)),l.a.createElement("div",{className:"card-image"},l.a.createElement("img",{src:e.photo,alt:""})),l.a.createElement("div",{className:"card-content"},N===e._id?l.a.createElement(l.a.Fragment,null,e.likes.includes(t._id)?l.a.createElement("i",{className:"material-icons",style:{color:"red",cursor:"pointer"}},"favorite_border"):l.a.createElement("i",{className:"material-icons",style:{color:"black",cursor:"pointer"}},"favorite")):l.a.createElement(l.a.Fragment,null,e.likes.includes(t._id)?l.a.createElement("i",{className:"material-icons",onClick:function(){O(w,e._id)},style:{color:"red",cursor:"pointer"}},"favorite"):l.a.createElement("i",{className:"material-icons",onClick:function(){O(x,e._id)},style:{color:"black",cursor:"pointer"}},"favorite_border")),l.a.createElement("h6",null,e.likes.length," likes"),l.a.createElement("h6",null,e.title),l.a.createElement("p",null,e.body),e.comments.map((function(e,t){return l.a.createElement("h6",{key:t},l.a.createElement("span",{style:{fontWeight:"500"}},e.postedBy.name," :  "),"  ",e.text)})),l.a.createElement("form",{onSubmit:function(t){var a,n;t.preventDefault(),a=t.target[0].value,n=e._id,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:n,text:a})}).then((function(e){return e.json()})).then((function(e){var t=r.map((function(t){return t._id===e._id?e:t}));o(t)})).catch((function(e){return console.log(e)}))},style:{display:"flex"}},l.a.createElement("input",{type:"text",value:E,onChange:function(e){return v(e.target.value)},placeholder:"comment"}),l.a.createElement("button",{className:"btn #ffffff white"},l.a.createElement("i",{className:"material-icons",style:{color:"#64b5f6"}},"send")))))})),0===r.length&&l.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.a.createElement("h3",null,"No Following Posts"))))};var O=function(){var e=Object(o.e)(),t=Object(n.useContext)(S),a=t.state,c=t.dispatch,r=Object(n.useState)(""),s=Object(i.a)(r,2),m=s[0],p=s[1],d=Object(n.useState)(""),h=Object(i.a)(d,2),g=h[0],E=h[1],v=Object(n.useState)(""),b=Object(i.a)(v,2),y=b[0],N=b[1],j=Object(n.useState)(""),O=Object(i.a)(j,2),x=O[0],w=O[1],_=Object(n.useState)(""),k=Object(i.a)(_,2),C=(k[0],k[1]),I=Object(n.useState)(!1),A=Object(i.a)(I,2),z=A[0],B=A[1];Object(n.useEffect)((function(){a&&(p(a.name),E(a.email),N(a.profilePic))}),[a]);var J=function(){if(B(!0),x){var t=new FormData;t.append("file",x),t.append("upload_preset","insta-clone"),t.append("cloud_name","dhhb3z0nt"),u.a.toast({html:"wait posting......<br />Don't perform any activities"}),fetch("\thttps://api.cloudinary.com/v1_1/dhhb3z0nt/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(t){var a;C(t.url),a=t.url,fetch("/editProfile",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({username:m,email:g,profilePic:a})}).then((function(e){return e.json()})).then((function(t){localStorage.setItem("user",JSON.stringify(t)),c({type:"USER",payload:t}),t.error?u.a.toast({html:t.error,classes:"#ff5252 red accent-2"}):(u.a.toast({html:"Profile updated Successfully",classes:"#69f0ae green accent-2"}),e.push("/profile"),B(!1))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}x||fetch("/editProfile",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({username:m,email:g,profilePic:a.profilePic})}).then((function(e){return e.json()})).then((function(t){localStorage.setItem("user",JSON.stringify(t)),c({type:"USER",payload:t}),t.error?u.a.toast({html:t.error,classes:"#ff5252 red accent-2"}):(u.a.toast({html:"Profile updated Successfully",classes:"#69f0ae green accent-2"}),e.push("/profile"),B(!1))})).catch((function(e){console.log(e)}))};return l.a.createElement("div",{className:"myCard"},a?l.a.createElement("div",{className:"card auth-card input-field"},z?l.a.createElement("div",{style:{alignItems:"center",display:"flex",flexDirection:"column",margin:"20px"}}," ",l.a.createElement("h2",{style:{margin:"100px 0 100px 0"}},"loading.....!")," ",l.a.createElement(f,null)," "):l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{className:"brand-logo"},"Edit Profile"),l.a.createElement("div",{className:"profile__image"},l.a.createElement("img",{style:{width:"160px",height:"160px",borderRadius:"80px"},src:y,alt:"profile pic"})),l.a.createElement("button",{className:"btn #64b5f6 blue darken-2",onClick:function(){return B(!0),void fetch("/deleteDP",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(t){localStorage.setItem("user",JSON.stringify(t)),c({type:"USER",payload:t}),t.error?u.a.toast({html:t.error,classes:"#ff5252 red accent-2"}):(u.a.toast({html:"Profile updated Successfully",classes:"#69f0ae green accent-2"}),e.push("/profile"),B(!1))})).catch((function(e){console.log(e)}))}},"delete profile picture"),l.a.createElement("hr",null),l.a.createElement("h6",null,l.a.createElement("strong",null,"Update Details here..")),l.a.createElement("input",{type:"text",placeholder:"Username",value:m,onChange:function(e){return p(e.target.value)}}),l.a.createElement("input",{type:"text",placeholder:"Email",value:g,onChange:function(e){return E(e.target.value)}}),l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn  #64b5f6 blue darken-2"},l.a.createElement("span",null,"profile pic"),l.a.createElement("input",{type:"file",onChange:function(e){return w(e.target.files[0])}})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text",placeholder:"Upload one or more files"}))),l.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-2",onClick:function(){return J()}},"Update profile"))):l.a.createElement("div",{style:{alignItems:"center",display:"flex",flexDirection:"column"}}," ",l.a.createElement("h2",{style:{margin:"100px 0 100px 0"}},"loading.....!")," ",l.a.createElement(f,null)," "))};var x=function(){var e=Object(o.e)(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],r=a[1];return l.a.createElement("div",{className:"myCard"},l.a.createElement("div",{className:"card auth-card input-field"},l.a.createElement("h2",{className:"brand-logo"},"Instagram"),l.a.createElement("input",{type:"text",placeholder:"Email",value:c,onChange:function(e){return r(e.target.value)}}),l.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-2",onClick:function(){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(c)?fetch("/auth/reset-password",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c})}).then((function(e){return e.json()})).then((function(t){t.error?u.a.toast({html:t.error,classes:"#ff5252 red accent-2"}):(u.a.toast({html:t.message,classes:"#69f0ae green accent-2"}),e.push("/login"))})).catch((function(e){console.log(e)})):u.a.toast({html:"Entered a invalid Email",classes:"#ff5252 red accent-2"})}},"reset password")))};var w=function(){var e=Object(o.e)(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],r=a[1],s=Object(o.f)().token;return l.a.createElement("div",{className:"myCard"},l.a.createElement("div",{className:"card auth-card input-field"},l.a.createElement("h2",{className:"brand-logo"},"Instagram"),l.a.createElement("input",{type:"password",placeholder:"Enter New password",value:c,onChange:function(e){return r(e.target.value)}}),l.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-2",onClick:function(){fetch("/auth/new-password",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:c,token:s})}).then((function(e){return e.json()})).then((function(t){t.error?u.a.toast({html:t.error,classes:"#ff5252 red accent-2"}):(u.a.toast({html:t.message,classes:"#69f0ae green accent-2"}),e.push("/login"))})).catch((function(e){console.log(e)}))}},"Reset password")))},S=Object(n.createContext)(),_=function(){var e=Object(o.e)(),t=Object(n.useContext)(S),a=t.state,c=t.dispatch;return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t?c({type:"USER",payload:t}):e.location.pathname.startsWith("/reset")||e.push("/login")}),[]),l.a.createElement(l.a.Fragment,null,a?l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{path:"/",exact:!0,component:h}),l.a.createElement(o.a,{path:"/followposts",exact:!0,component:j}),l.a.createElement("div",{className:"App__profile"},l.a.createElement(o.a,{path:"/profile",exact:!0,component:g}),l.a.createElement(o.a,{path:"/profile/:userid",component:N})),l.a.createElement(o.a,{path:"/editProfile",component:O}),l.a.createElement(o.a,{path:"/createpost",component:b})):l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{path:"/login",component:E}),l.a.createElement(o.a,{path:"/reset",exact:!0,component:x}),l.a.createElement(o.a,{path:"/reset/:token",component:w}),l.a.createElement(o.a,{path:"/signup",component:v})))};var k=function(){var e=Object(n.useReducer)(y,null),t=Object(i.a)(e,2),a=t[0],c=t[1];return l.a.createElement("div",{className:"App"},l.a.createElement(S.Provider,{value:{state:a,dispatch:c}},l.a.createElement(s.a,null,l.a.createElement(p,null),l.a.createElement(_,null))))};r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(k,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.147b9dbd.chunk.js.map